@model List<Schedule>
@{
	ViewData["Title"] = "Track Schedule";
	Layout = "~/Views/Shared/_LayoutSystem.cshtml";
}

@functions {
	public string GetScheduleTypeClass(ScheduleType type)
	{
		switch (type)
		{
			case ScheduleType.Online:
				return "schedule-online";
			case ScheduleType.Offline:
				return "schedule-offline";
			case ScheduleType.Holiday:
				return "schedule-holiday";
			case ScheduleType.Funday:
				return "schedule-funday";
			default:
				return "";
		}
	}
}

<div class="row mb-3">
	<div class="col">
		<form method="post">
			<label for="trackId" class="form-label">Select Track:</label>
			<select id="trackId" name="trackId" class="form-select">
				@foreach (var track in ViewBag.InstructorTracks)
				{
					if (ViewBag.SelectedTrackId == track.TrackId)
					{
						<option value="@track.TrackId" selected>@track.Name</option>
					}
					else
					{
						<option value="@track.TrackId">@track.Name</option>
					}
				}
			</select>
			<button type="submit" class="btn btn-primary mt-3">Show Schedule</button>
		</form>
	</div>
</div>
<p class="text-center fs-2 alert alert-primary">@ViewBag.SelectedTrackName</p>

@if (Model.Count > 0)
{
	<table class="table">
		<thead>
			<tr class="text-center">
				<th style="width: 100px;">Date</th>
				<th style="width: 100px;">Day</th>
				<th>Start Time</th>
				<th>End Time</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			@foreach (var schedule in Model)
			{
				<tr class="@(GetScheduleTypeClass(schedule.Type))">
					<td style="width: 150px;">@schedule.Date.ToShortDateString()</td>
					<td style="width: 150px;">@schedule.Date.DayOfWeek</td>
					@if (schedule.Type == ScheduleType.Holiday || schedule.Type == ScheduleType.Funday)
					{
						<td colspan="3" class="text-center fw-bolder fst-italic fs-5">-- @schedule.Type.ToString() --</td>
					}
					else
					{
						<td style="text-align: center;">
							@schedule.StartPeriod.ToString()
						</td>
						<td>
							@schedule.EndPeriod.ToString()
						</td>
						<td style="text-align: center;">
							@schedule.Type.ToString()
						</td>
					}
				</tr>
			}
		</tbody>
	</table>
	if (ViewBag.IsSupervisor)
	{
		<div class="row">
			<div class="col">
				<a asp-action="EditSchedule" asp-route-trackId="@ViewBag.SelectedTrackId" style="background-color:#6c5ddc" class="text-white btn">Edit Schedule</a>
			</div>
		</div>
	}
}
else
{
	<p class="alert alert-info text-center">No schedule assigned.</p>
}




